diff --git a/luci-app-passwall/luasrc/controller/passwall.lua b/luci-app-passwall/luasrc/controller/passwall.lua
index 7f373a9..3c672ce 100644
--- a/luci-app-passwall/luasrc/controller/passwall.lua
+++ b/luci-app-passwall/luasrc/controller/passwall.lua
@@ -92,6 +92,8 @@ function index()
 	entry({"admin", "services", appname, "subscribe_manual"}, call("subscribe_manual")).leaf = true
 	entry({"admin", "services", appname, "subscribe_manual_all"}, call("subscribe_manual_all")).leaf = true
 	entry({"admin", "services", appname, "flush_set"}, call("flush_set")).leaf = true
+	-- 新增IP信息查询路由
+	entry({"admin", "services", appname, "ip_info"}, call("ip_info")).leaf = true

 	--[[rule_list]]
 	entry({"admin", "services", appname, "read_rulelist"}, call("read_rulelist")).leaf = true
@@ -366,6 +368,114 @@ function connect_status()
 	http_write_json(e)
 end

+-- IP信息查询接口（新增独立函数）
+function ip_info()
+    local e = {}
+    local url = "https://ip.api.skk.moe/cf-geoip"
+
+    -- 获取代理配置
+    local localhost_proxy = uci:get(appname, "@global[0]", "localhost_proxy") or "1"
+    local socks_server = (localhost_proxy == "0") and api.get_cache_var("GLOBAL_TCP_SOCKS_server") or ""
+
+    -- 构建curl命令
+    local curl_cmd = '/usr/bin/curl --max-time 10 -s '
+
+	-- 模拟浏览器请求
+	curl_cmd = curl_cmd .. [[ -H 'accept: */*' \
+	-H 'accept-language: zh-CN,zh;q=0.9,en;q=0.8' \
+	-H 'cache-control: no-cache' \
+	-H 'dnt: 1' \
+	-H 'origin: https://ip.skk.moe' \
+	-H 'pragma: no-cache' \
+	-H 'referer: https://ip.skk.moe/' \
+	-H 'sec-ch-ua: \"Microsoft Edge\";v=\"123\", \"Not:A-Brand\";v=\"8\", \"Chromium\";v=\"123\"' \
+	-H 'sec-ch-ua-mobile: ?0' \
+	-H 'sec-ch-ua-platform: \"Windows\"' \
+	-H 'sec-fetch-dest: empty' \
+	-H 'sec-fetch-mode: cors' \
+	-H 'sec-fetch-site: same-site' \
+	-H 'user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36 Edg/123.0.0.0' \
+	]]
+
+    -- 强制使用代理（如果有代理配置）
+    if socks_server and socks_server ~= "" then
+        curl_cmd = curl_cmd .. '--socks5-hostname ' .. socks_server .. ' '
+    end
+
+    curl_cmd = curl_cmd .. "'" .. url .. "'"
+
+    -- 执行命令
+    local result = luci.sys.exec(curl_cmd)
+
+    if result and result ~= "" then
+        -- 方法1：尝试使用luci.jsonc解析（如果可用）
+        local success, data = false, nil
+
+        -- 首先尝试使用luci.jsonc
+        if pcall(require, "luci.jsonc") then
+            local jsonc = require("luci.jsonc")
+            success, data = pcall(jsonc.parse, result)
+        end
+
+        -- 如果luci.jsonc不可用或解析失败，尝试使用luci.json
+        if not success and pcall(require, "luci.json") then
+            local json = require("luci.json")
+            success, data = pcall(json.parse, result)
+        end
+
+        -- 如果上面的方法都失败，使用简单的字符串匹配（作为备用方案）
+        if not success then
+            -- 使用简单的模式匹配提取JSON字段
+            local ip_match = result:match('"ip"%s*:%s*"([^"]+)"')
+            local country_match = result:match('"country"%s*:%s*"([^"]+)"')
+            local city_match = result:match('"city"%s*:%s*"([^"]+)"')
+            local region_match = result:match('"region"%s*:%s*"([^"]+)"')
+
+            if ip_match and country_match then
+                data = {
+                    ip = ip_match,
+                    country = country_match,
+                    city = city_match or "",
+                    region = region_match or ""
+                }
+                success = true
+            end
+        end
+
+        if success and data then
+            e.ip = data.ip or ""
+            e.country = data.country or ""
+            e.city = data.city or ""
+            e.region = data.region or ""
+
+            -- 可选：添加asn和asOrg信息
+            if data.asn then
+                e.asn = data.asn
+            end
+            if data.asOrg then
+                e.asOrg = data.asOrg
+            end
+
+            -- 记录代理使用情况
+            if socks_server and socks_server ~= "" then
+                e.proxy_used = true
+            end
+
+            -- 如果返回了测试数据（114.5.1.4），添加注释
+            if e.ip == "114.5.1.4" and e.country == "SB" then
+                e.note = "This appears to be test data from proxy server"
+            end
+        else
+            e.error = "Failed to parse JSON response"
+            e.raw_response = result:sub(1, 200) -- 返回前200个字符用于调试
+        end
+    else
+        e.error = "No response from API"
+    end
+
+    http_write_json(e)
+end
+
 function ping_node()
 	local index = http.formvalue("index")
 	local address = http.formvalue("address")
diff --git a/luci-app-passwall/luasrc/view/passwall/global/status.htm b/luci-app-passwall/luasrc/view/passwall/global/status.htm
index eb5527e..b29e613 100644
--- a/luci-app-passwall/luasrc/view/passwall/global/status.htm
+++ b/luci-app-passwall/luasrc/view/passwall/global/status.htm
@@ -174,15 +174,17 @@ https://github.com/pure-css/pure/blob/master/LICENSE.md
 				</div>
 			</div>
 		</div>
-		<div class="pure-u-1-4 check" onclick="check_connect('youtube', 'https://www.youtube.com')" title="<%:TLS handshake test, latency for reference only%>">
+		<div class="pure-u-1-4 check" onclick="check_ip_info()">
 			<div class="block pure-g">
 				<div class="pure-u-1-3">
 					<div class="img-con">
-						<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIKICAgd2lkdGg9IjMwMCIKICAgaGVpZ2h0PSIzMDAiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzYiCiAgIHNvZGlwb2RpOmRvY25hbWU9IllvdVR1YmVfc29jaWFsX3JlZF9jaXJjbGVfKDIwMjQpLnN2ZyIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMS4yLjIgKGIwYTg0ODY1NDEsIDIwMjItMTItMDEpIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzCiAgIGlkPSJkZWZzMTAiIC8+PHNvZGlwb2RpOm5hbWVkdmlldwogICBpZD0ibmFtZWR2aWV3OCIKICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICBib3JkZXJjb2xvcj0iIzAwMDAwMCIKICAgYm9yZGVyb3BhY2l0eT0iMC4yNSIKICAgaW5rc2NhcGU6c2hvd3BhZ2VzaGFkb3c9IjIiCiAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjAiCiAgIGlua3NjYXBlOmRlc2tjb2xvcj0iI2QxZDFkMSIKICAgc2hvd2dyaWQ9ImZhbHNlIgogICBpbmtzY2FwZTp6b29tPSIxLjI1IgogICBpbmtzY2FwZTpjeD0iMTQyLjQiCiAgIGlua3NjYXBlOmN5PSIxNTAuOCIKICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMTg3IgogICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI1ODIiCiAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnNiIgLz4KICA8cmVjdAogICB3aWR0aD0iMzAwIgogICBoZWlnaHQ9IjMwMCIKICAgZmlsbD0iI2ZmZiIKICAgcnk9IjE1MCIKICAgaWQ9InJlY3QyIgogICBzdHlsZT0iZmlsbDojZmYwMDMzO2ZpbGwtb3BhY2l0eToxIiAvPgogIDxwYXRoCiAgIGZpbGw9InJlZCIKICAgZD0iTTE0OS45Mzc1MDU4NyA3OS4yMjI2NzM2NHMtNjMuMjE4ODUuMDAwMDU5LTc5LjA4NTkzOTI2IDQuMTIzMDQ3MDdjLTguNDk1Nzg3MTQgMi4zNzM4MDIwNC0xNS40OTE0MDgyNSA5LjM2OTUwMDE1LTE3Ljg2NTIzNDI5IDE3Ljk5MDIzNzI5LTQuMTIyOTUzMDYgMTUuODY3MTAwMjUtNC4xMjMwNDcwNiA0OC43MjY1NjA3OC00LjEyMzA0NzA2IDQ4LjcyNjU2MDc4cy4wMDAwOTQgMzIuOTg0MjAwNTIgNC4xMjMwNDcwNiA0OC42MDE1NjA3N2MyLjM3MzgyNjA0IDguNjIwNjIwMTQgOS4yNDQ1MDYxNSAxNS40OTEzODAyNSAxNy44NjUyMzQyOSAxNy44NjUyNDAyOSAxNS45OTIwMzAyNSA0LjI0Nzg4MDA3IDc5LjA4NTkzOTI2IDQuMjQ4MDQwMDcgNzkuMDg1OTM5MjYgNC4yNDgwNDAwN3M2My4zNDQxODEwMS0uMDAwMDUgNzkuMjEwOTQxMjctNC4xMjMwNDAwN2M4LjYyMDc5MDE0LTIuMzczODEwMDQgMTUuNDkxMzMwMjUtOS4xMTk2NjAxNSAxNy43NDAyMzAyOC0xNy44NjUyNDAyOSA0LjI0NzkzMDA3LTE1Ljc0MjMyMDI1IDQuMjQ4MDUwMDctNDguNjAxNTYwNzcgNC4yNDgwNTAwNy00OC42MDE1NjA3N3MuMTI0ODQtMzIuOTg0NDYwNTMtNC4yNDgwNTAwNy00OC44NTE1NjA3OGMtMi4yNDg5MDAwMy04LjYyMDczNzE0LTkuMTE5NDQwMTQtMTUuNDkxMzM0MjUtMTcuNzQwMjMwMjgtMTcuNzQwMjM3MjktMTUuODY2NzYwMjYtNC4zNzI4NDcwNy03OS4yMTA5NDEyNy00LjM3MzA0NzA3LTc5LjIxMDk0MTI3LTQuMzczMDQ3MDd6bS0yMC4xMTUyMzAzMiA0MC40ODA0NjQ2NSA1Mi41OTk2MTA4NCAzMC4zNTkzODA0OS01Mi41OTk2MTA4NCAzMC4yMzQzODA0OHYtNjAuNTkzNzYwOTd6IgogICBpZD0icGF0aDQiCiAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjEiIC8+Cjwvc3ZnPg==" />
+						<img src="data:image/png;base64,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">
					</div>
 				</div>
 				<div class="pure-u-2-3">
-					<h4 id="status_youtube"><%:YouTube Conn.%><br /><span id="_youtube_status" class="red"><%:Touch Check%></span></h4>
+					<h4 id="status_ipinfo"><%:IP Location%><br />
+						<span id="_ipinfo_status" class="red"><%:Touch Check%></span>
+					</h4>
 				</div>
 			</div>
 		</div>
@@ -238,6 +240,42 @@ https://github.com/pure-css/pure/blob/master/LICENSE.md
 				}
 			});

+		function check_ip_info() {
+			var statusElement = document.getElementById('_ipinfo_status');
+			var titleElement = document.getElementById('status_ipinfo');
+
+			// 显示检查中状态
+			statusElement.className = 'yellow';
+			statusElement.innerHTML = '<%:Checking...%>';
+
+			// 发送请求到新的ip_info接口
+			XHR.get('<%=api.url("ip_info")%>', null,
+				function(x, info) {
+					if (x && x.status === 200) {
+						try {
+							var data = JSON.parse(x.responseText);
+							if (data.ip && data.country) {
+								statusElement.className = 'green';
+								statusElement.innerHTML = data.ip + ' (' + data.country + ')';
+							} else if (data.error) {
+								statusElement.className = 'red';
+								statusElement.innerHTML = data.error;
+							} else {
+								statusElement.className = 'red';
+								statusElement.innerHTML = '<%:Unknown Error%>';
+							}
+						} catch(e) {
+							statusElement.className = 'red';
+							statusElement.innerHTML = '<%:Parse Error%>';
+						}
+					} else {
+						statusElement.className = 'red';
+						statusElement.innerHTML = '<%:Request Failed%>';
+					}
+				}
+			);
+		}
+
 		function check_connect(type, url) {
 			var s = document.getElementById('_' + type + '_status');
 			if (s) {
